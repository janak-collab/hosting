#!/bin/bash
# GMPM Backup Script
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR=~/backups
mkdir -p $BACKUP_DIR

echo "ðŸ”„ Starting GMPM backup..."

# Backup application files
tar -czf $BACKUP_DIR/gmpm_app_$TIMESTAMP.tar.gz ~/app/ 2>/dev/null
echo "âœ“ Application files backed up"

# Backup public files
tar -czf $BACKUP_DIR/gmpm_public_$TIMESTAMP.tar.gz ~/public_html/ 2>/dev/null
echo "âœ“ Public files backed up"

# Backup database (update with your credentials)
mysqldump -u gmpmus_gmpmuser -p']2$K4d9h%D+1Uu7bv$' gmpmus_gmpm > $BACKUP_DIR/gmpm_db_$TIMESTAMP.sql 2>/dev/null
echo "âœ“ Database backed up"

# Keep only last 5 backups
ls -t $BACKUP_DIR/gmpm_app_*.tar.gz | tail -n +6 | xargs rm -f 2>/dev/null
ls -t $BACKUP_DIR/gmpm_public_*.tar.gz | tail -n +6 | xargs rm -f 2>/dev/null
ls -t $BACKUP_DIR/gmpm_db_*.sql | tail -n +6 | xargs rm -f 2>/dev/null

echo "âœ… Backup complete: $BACKUP_DIR"
